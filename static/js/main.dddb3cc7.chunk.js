(this.webpackJsonppaws_and_reflect=this.webpackJsonppaws_and_reflect||[]).push([[0],{204:function(e,t,a){e.exports=a(231)},209:function(e,t,a){},231:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),l=(a(209),a(14)),i=a(192),u=a(17),s=a(288),d=a(282),m=a(285),f=a(286),b=a(287),g=a(257),h=a(259),v=a(262),p=a(69),E=a(263),y=a(261),O=Object(n.createContext)({}),j=a(20),w=Symbol("is loading action type"),k=Symbol("search handler action type"),S=Symbol("search handler action type"),C=Symbol("alert message action type"),x=function(e,t){return function(e){return e.type===w}(t)?Object(j.a)({},e,{isLoading:t.payload}):function(e){return e.type===k}(t)?Object(j.a)({},e,{headerSearchHandler:t.payload}):function(e){return e.type===S}(t)?Object(j.a)({},e,{selectedView:t.payload}):function(e){return e.type===C}(t)?Object(j.a)({},e,{alertMessage:t.payload}):e},B=function(e){return function(t){e({type:k,payload:t})}},V=function(e){return function(t){e({type:C,payload:t})}},D=Object(s.a)(g.a)({flexGrow:1}),T=Object(s.a)(h.a)((function(e){e.theme;return{margin:"0 4px"}})),U=Object(y.a)((function(e){return{title:{},spacer:{flexGrow:1}}})),I=function(){var e,t=Object(n.useContext)(O),a=t.globalState,c=t.globalStateDispatch,o=Object(n.useState)(""),i=Object(l.a)(o,2),u=i[0],s=i[1],d=U(),m=a.headerSearchHandler,f=a.selectedView,b=Object(n.useCallback)((e=c,function(t){e({type:S,payload:t})}),[c]);return r.a.createElement(D,{color:"default"},r.a.createElement(v.a,null,r.a.createElement(p.a,{variant:"h6",className:d.title},"Paws and Reflect"),r.a.createElement("div",{className:d.spacer}),r.a.createElement("div",null,["Gallery","Picture Book"].map((function(e){return r.a.createElement(T,{key:e,color:"secondary",variant:e===f?"contained":"outlined",onClick:function(){return b(e)}},e)}))),r.a.createElement("div",{className:d.spacer}),r.a.createElement("div",null,r.a.createElement(E.a,{variant:"outlined",placeholder:"Search",value:u,onChange:function(e){var t=e.target.value;s(t),m&&m(t)},disabled:!m}))))},P=a(240),L=a(265),R=Object(s.a)(P.a)((function(e){return{backgroundColor:e.theme.palette.grey.A200}})),z=function(){var e=Object(n.useContext)(O).globalState;return r.a.createElement(R,{open:e.isLoading,timeout:1e3},r.a.createElement(L.a,{color:"secondary",variant:"indeterminate"}))},G=a(266),H=Object(s.a)((function(e){return r.a.createElement("div",e)}))({root:{flexGrow:1,marginBottom:32}}),N=function(e){var t=e.matchesFound,a=e.children;return t?r.a.createElement(H,null,r.a.createElement(G.a,{container:!0,spacing:4},a)):r.a.createElement("div",null,r.a.createElement(p.a,{variant:"h3"},"No breed matches found."))},W=a(267),M=Object(s.a)(W.a)((function(e){var t=e.theme;return{padding:t.spacing(1),margin:t.spacing(1),width:"100%",height:"100%",backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.dark}}})),_=function(e){var t=e.breed,a=e.selected,n=e.setSelectedBreed;return r.a.createElement(M,{value:t,selected:a,onChange:function(e){return function(){return n(e)}}(t)},t)},A=a(271),F=a(272),J=a(273),$=a(274),q=a(275),K=a(268),Q=a(269),X=a(270),Y=function(e){var t=e.imageUrl,a=e.photoDimensions,c=void 0===a?{}:a,o=e.open,i=e.onClose,u=Object(n.useState)(),s=Object(l.a)(u,2),d=s[0],m=s[1];return Object(n.useEffect)((function(){o&&c.width&&(c.width>=960?m("lg"):c.width>=600?m("md"):c.width>=440&&m("sm"),console.log("".concat(null===c||void 0===c?void 0:c.width," by ").concat(null===c||void 0===c?void 0:c.height)))}),[o,c]),r.a.createElement(K.a,{open:o,onClose:i,fullWidth:!!d,maxWidth:d},r.a.createElement(Q.a,null,r.a.createElement("img",{src:t,alt:"Dog"})),r.a.createElement(X.a,null,r.a.createElement(h.a,{variant:"contained",onClick:i},"Close")))},Z=Object(y.a)((function(e){return{icon:{color:e.palette.common.white}}})),ee=function(e){var t=e.open,a=e.breedImageUrls,c=Object(n.useContext)(O).globalState,o=Object(n.useState)(""),i=Object(l.a)(o,2),u=i[0],s=i[1],d=Object(n.useRef)({}),m=Z(),f=function(){return s("")};return t&&!c.isLoading?r.a.createElement(A.a,{cols:4,cellHeight:200},a.map((function(e){return r.a.createElement(F.a,{key:e},r.a.createElement("img",{src:e,alt:"Dog",onLoad:function(e){return t=e.target,void(d.current[null===t||void 0===t?void 0:t.src]={width:null===t||void 0===t?void 0:t.naturalWidth,height:null===t||void 0===t?void 0:t.naturalHeight});var t}}),r.a.createElement(J.a,{actionIcon:r.a.createElement($.a,{onClick:(t=e,function(){return s(t)}),className:m.icon},r.a.createElement(q.a,null))}),r.a.createElement(Y,{imageUrl:e,photoDimensions:d.current[e],open:u===e,onClose:f}));var t}))):r.a.createElement("div",null)},te=a(86),ae=a.n(te),ne=ae.a.create({timeout:1e4}),re=ae.a.CancelToken.source,ce=function(e,t){return ne.get(e,{cancelToken:t})},oe=function(e){var t,a=Object(n.useState)([]),r=Object(l.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),s=u[0],d=u[1],m=Object(n.useRef)([]),f=Object(n.useContext)(O),b=f.globalStateDispatch,g=f.globalState.isLoading,h=Object(n.useCallback)((t=b,function(e){t({type:w,payload:e})}),[b]),v=Object(n.useCallback)((function(e){return V(b)({severity:"error",message:e})}),[b]);Object(n.useEffect)((function(){var e=re();return m.current.length||(h(!0),ce("https://dog.ceo/api/breeds/list/all",e.token).then((function(e){var t=e.data;t.status&&"success"===t.status?(m.current=Object.keys(t.message).sort(),o(m.current)):v("There was a problem trying to find the dogs.")})).catch((function(){return v("Error! The dog data could not be loaded.")})).finally((function(){h(!1)}))),function(){e.cancel()}}),[o,h,v]);var p=Object(n.useCallback)((function(e,t){return g?Promise.resolve(null):(h(!0),Promise.all(e.map((function(e){return new Promise((function(a,n){var r=function(e){return"https://dog.ceo/api/breed/".concat(e,"/images")}(e);ce(r,t).then((function(t){var n=t.data;n.status&&"success"===n.status?a({breed:e,imageUrls:n.message}):(v("There was a problem trying to find the photos."),a(void 0))})).catch((function(e){v("Error! The dog photo data could not be loaded."),n(e)}))}))}))).finally((function(){return h(!1)})))}),[g,h,v]);return{searchBreeds:Object(n.useCallback)((function(e){m.current.length&&(h(!0),o(m.current.filter((function(t){return t.includes(e)}))),h(!1))}),[m,h]),selectedBreed:s,setSelectedBreed:d,breeds:void 0===e?c:c.slice(0,e),totalBreeds:c.length,loadBreedImages:p}},le=Object(s.a)((function(e){return r.a.createElement(G.a,Object.assign({container:!0,direction:"row"},e))}))({height:"100vh"}),ie=Object(s.a)((function(e){return r.a.createElement(G.a,Object.assign({item:!0},e))}))({height:"100vh",overflow:"scroll"}),ue=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=oe(),i=o.searchBreeds,u=o.breeds,s=o.selectedBreed,d=o.setSelectedBreed,m=o.loadBreedImages,f=Object(n.useContext)(O),b=f.globalStateDispatch,g=f.globalState;Object(n.useEffect)((function(){return B(b)(i),function(){B(b)(void 0)}}),[b,i]),Object(n.useEffect)((function(){!s||a.length>0||m([s]).then((function(e){if(e){var t=Object(l.a)(e,1)[0];c(t.imageUrls)}})).catch((function(){return d("")}))}),[s,d,a,c,m]);var h=function(e){c([]),d(e)};return r.a.createElement(le,{spacing:8},r.a.createElement(ie,{xs:2},r.a.createElement(N,{matchesFound:!!u.length||g.isLoading},u.map((function(e){return r.a.createElement(_,{key:e,breed:e,selected:e===s,setSelectedBreed:h})})))),r.a.createElement(ie,{xs:10},r.a.createElement(ee,{open:!!s,breedImageUrls:a})))},se=Symbol("page change action type"),de=Symbol("filter change action type"),me=Symbol("apply filter action type"),fe=Symbol("sort change action type"),be=Symbol("option change action type"),ge=function(e,t){var a=function(e,t){return function(a){return a&&t?t:e.dataViewChangedEvent}}(e,t.event);return function(e){return e.type===se}(t)?Object(j.a)({},e,{dataViewChangedEvent:a(t.payload.offset!==e.offset||t.payload.take!==e.take),offset:t.payload.offset,take:t.payload.take}):function(e){return e.type===de}(t)?Object(j.a)({},e,{dataViewChangedEvent:a(t.payload.length<e.filters.length),filters:t.payload}):function(e){return e.type===fe}(t)?Object(j.a)({},e,{dataViewChangedEvent:a(!0),sorters:t.payload}):function(e){return e.type===me}(t)?Object(j.a)({},e,{offset:0,dataViewChangedEvent:a(!0)}):function(e){return e.type===be}(t)?Object(j.a)({},e,{dataViewChangedEvent:a(!0),options:t.payload}):e},he=function(e){return function(t,a){e({type:se,payload:t.value||a,event:t.nativeEvent})}},ve=a(276),pe=a(277),Ee=a(278),ye=a(279),Oe=a(280),je=a(281),we=Object(s.a)(ve.a)((function(e){var t=e.theme;return{backgroundImage:"linear-gradient(".concat(t.palette.primary.light,", ").concat(t.palette.common.white,")"),color:t.palette.primary.contrastText}})),ke=Object(s.a)(pe.a)({height:220}),Se=Object(s.a)(Ee.a)({textTransform:"capitalize"}),Ce=function(e){var t=e.breedDetail,a=Object(n.useState)(0),c=Object(l.a)(a,2),o=c[0],i=c[1];return r.a.createElement(we,null,r.a.createElement(Se,{title:t.breed}),r.a.createElement(ke,{image:t.imageUrls[o],onError:function(e){return console.log("ERR",e)}}),r.a.createElement(ye.a,{disableSpacing:!0,color:"white"},r.a.createElement($.a,{size:"small",onClick:function(){return i(o-1)},disabled:0===o},r.a.createElement(Oe.a,null)),r.a.createElement($.a,{size:"small",onClick:function(){return i(o+1)},disabled:o===t.imageUrls.length-1},r.a.createElement(je.a,{color:"action"}))))},xe=a(289),Be=a(283),Ve=a(284),De=Object(s.a)(h.a)((function(e){return{margin:e.theme.spacing(2)}})),Te=function(e){var t=e.offset,a=e.take,n=e.size,c=e.total,o=e.onPageChange,l=t/n+1,i=Math.ceil(c/n),u=Array(i).fill({},0,i).map((function(e,t){return{value:t+1,label:"".concat(t+1)}}));return r.a.createElement(d.a,{maxWidth:"sm",style:{marginTop:16}},r.a.createElement(G.a,{container:!0,spacing:4},r.a.createElement(G.a,{item:!0,xs:2},r.a.createElement(De,{size:"small",variant:"contained",color:"secondary",disabled:0===t,onClick:function(e){return r=e.nativeEvent,o(t-n,a,r);var r}},r.a.createElement(Be.a,null))),r.a.createElement(G.a,{item:!0,xs:8},i>1&&r.a.createElement(xe.a,{value:l,min:1,max:i,marks:u,onChange:function(e,t){return o((t-1)*n,a,e.nativeEvent)}})),r.a.createElement(G.a,{item:!0,xs:2},r.a.createElement(De,{size:"small",variant:"contained",color:"secondary",disabled:l===i,onClick:function(e){return r=e.nativeEvent,o(t+n,a,r);var r}},r.a.createElement(Ve.a,null)))))},Ue=function(e,t){return e.length!==t.length||e.filter((function(e){return!t.includes(e)})).length>0},Ie=Object(s.a)(G.a)({height:"calc(100vh - 175px)",overflow:"scroll"}),Pe=new Event("init event"),Le=function(){var e,t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],i=oe(),u=i.breeds,s=i.totalBreeds,d=i.loadBreedImages,m=i.searchBreeds,f=Object(n.useContext)(O),b=f.globalStateDispatch,g=f.globalState.isLoading,h=Object(n.useReducer)(ge,function(e,t){return{offset:0,take:e,filters:[],sorters:[],dataViewChangedEvent:new Event(""),options:t}}(6,{breeds:[]})),v=Object(l.a)(h,2),p=v[0],E=p.offset,y=p.take,j=p.options,w=p.dataViewChangedEvent,k=v[1],S=Object(n.useRef)(Pe),C=Object(n.useCallback)((e=k,function(t,a){e({type:be,payload:t.value||a,event:t.nativeEvent})}),[k]);Object(n.useEffect)((function(){return B(b)(m),function(){B(b)(void 0)}}),[b,m]),Object(n.useEffect)((function(){var e=function(e,t,a,n,r,c){var o=e.slice(a,a+n),l=Ue(o,t);return e.length>0&&!r&&(l||c)?l&&!c?{newEvent:new Event("breed search results"),newOffset:0,newView:e.slice(0,n)}:{newView:o}:{}}(u,j.breeds,E,y,g,w.timeStamp>S.current.timeStamp),t=e.newEvent,a=e.newOffset,n=e.newView;t&&void 0!==a&&(S.current=t,he(k)({nativeEvent:S.current,value:{offset:a,take:y}})),n&&C({nativeEvent:S.current,value:{breeds:n}})}),[u,C,w,g,j,E,y]),Object(n.useEffect)((function(){j.breeds.length>0&&Ue(c.map((function(e){return e.breed})),j.breeds)&&S.current.timeStamp===w.timeStamp&&!g&&(S.current=new Event("loading images"),d(j.breeds).then((function(e){e&&o(e.map((function(e){return{breed:e.breed,imageUrls:e.imageUrls}})))})))}),[j,d,c,o,g,w]);return r.a.createElement(G.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"stretch",style:{height:"100%"}},r.a.createElement(Ie,{container:!0,item:!0,spacing:2},c.map((function(e){return r.a.createElement(G.a,{item:!0,xs:4,key:e.breed},r.a.createElement(Ce,{breedDetail:e}))}))),r.a.createElement(G.a,{container:!0,item:!0,spacing:2},r.a.createElement(G.a,{item:!0,xs:12},r.a.createElement(Te,{offset:E,take:y,size:6,total:s,onPageChange:function(e,t,a){he(k)({nativeEvent:a,value:{offset:e,take:t}})}}))))},Re=Object(i.a)({palette:{primary:u.a.indigo,secondary:u.a.orange}}),ze=Object(s.a)(d.a)({marginTop:100,height:"100%"}),Ge={isLoading:!1,headerSearchHandler:void 0,selectedView:"Gallery",alertMessage:void 0},He=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useReducer)(x,Ge),i=Object(l.a)(o,2),u=i[0],s=i[1],d={globalState:u,globalStateDispatch:s},g=u.selectedView,h=u.alertMessage;Object(n.useEffect)((function(){h&&c(!0)}),[h]);return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,{theme:Re},r.a.createElement(O.Provider,{value:d},r.a.createElement(I,null),r.a.createElement(ze,null,r.a.createElement(z,null),"Picture Book"===g&&r.a.createElement(ue,null),"Gallery"===g&&r.a.createElement(Le,null)))),r.a.createElement(f.a,{open:a,autoHideDuration:5e3,onClose:function(){c(!1),V(s)(void 0)}},r.a.createElement(b.a,{severity:null===h||void 0===h?void 0:h.severity},null===h||void 0===h?void 0:h.message)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(He,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[204,1,2]]]);
//# sourceMappingURL=main.dddb3cc7.chunk.js.map